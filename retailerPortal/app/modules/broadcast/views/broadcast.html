<div ng-controller="broadcastController">
	<nav class="navbar navbar-default navbar-fixed-top">
		<div class="container">
			<div class="navbar-header">
				<button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false"
				 aria-controls="navbar">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
				<a class="navbar-brand a-logo" href="#/offline">airtel</a>
			</div>
			<div id="navbar" class="navbar-collapse collapse">
				<ul class="nav navbar-nav">
					<li><a ng-click="offlineHandler()">Offline Comission</a></li>
					<li ng-show="admin"><a ng-click="schemetgtHandler()">Navratna Scheme Tgt/Ach</a></li>
					<li ng-show="admin"><a ng-click="schemeHandler()">Navratna Scheme Details</a></li>
					<li ng-show="admin"><a ng-click="navratnabaseHandler()">Navratna Base </a></li>
					<li ng-show="admin"><a ng-click="archivesHandler()">Archives</a></li>
					<li class="active"><a ng-click="broadcastHandler()">Broadcast</a></li>
					<li ng-show="admin"><a ng-click="manageHandler()">Manage Users</a></li>
				</ul>
				<ul class="nav navbar-nav navbar-right">
					<li class="dropdown">
						<a class="dropdown-toggle user_img" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false"></a>
						<ul class="dropdown-menu">
							<li class="dropdown-header">
								<h5>{{userName}}</h5>
								<h6>OLM- {{olmID}}</h6>
							</li>
							<li role="separator" class="divider"></li>
							<li class="text-center">
								<button type="button" class="btn btn-default" aria-label="Right Align" ng-click="signOut()"> Sign Out   <span class="glyphicon glyphicon-off" aria-hidden="true"></span>
				</button>
							</li>
						</ul>
					</li>
				</ul>
			</div>
			<!--/.nav-collapse -->
		</div>
	</nav>

	<div class="container" style="margin-top:15px;">
		<ol class="breadcrumb">
			<li><a href="#/offline">Home</a></li>
			<li class="active">Broadcast</li>
		</ol>
		<div class="main">
			<div class="main" style="background-color:#f8f8f8;">
				<h3>Broadcast</h3>
				<hr/>
				<div class="form-group">
					<label for="circleList">Choose Circle</label>
					<select class="form-control selectpicker show-tick" ng-model="circleList" ng-show="admin" data-width="30%" title="Choose circles"
					 data-actions-box="true" multiple data-live-search="true">
						<option ng-repeat="circle in circles" value="{{circle[0]}}">{{circle[1]}}</option>
					</select>
					<select class="form-control" ng-model="circle" ng-hide="admin" style="width:180px;display:inline-block;">
						<option selected disabled value="">Choose circle</option>
						<option ng-repeat="circle in circles" value="{{circle[0]}}">{{circle[1]}}</option>
					</select>
					<div ng-hide="admin" style="display: inline;margin-left: 30px;">
						<input type="checkbox" ng-model="isWithinCircle">&nbsp;&nbsp;<strong>Within Circle</strong></input>
						<div class="form-group" ng-show="isWithinCircle" style="display: inline;margin-left: 15px;">
							<label for="exampleInputFile"> Choose File</label>
							<!--  <input type="file" id="exampleInputFile"> -->
							<input type="file" ngf-select ng-model="retailerFile" name="file" ngf-max-size="50MB" required ngf-model-invalid="errorFile"
							 accept=".xlsx" >
							<span class="progress" ng-show="picFile.progress >= 0">
		        				<div style="width:{{picFile.progress}}%" ng-bind="picFile.progress + '%'"></div>
		   					</span>
							<span ng-show="picFile.result">Upload Successful</span>
							<span class="err" ng-show="errorMsg">{{errorMsg}}</span>
							<small class="help-block" ng-show="isWithinCircle" style="display:inline;">Excel File Only</small>
						</div>
					</div>
				</div>
				<div class="form-group">
					<div style="width:100%">
						<label for="messageTitle">Title</label>
						<input type="text" class="form-control" id="title" ng-model="title" >
					</div>
				</div>
				<div class="row">
					<div class="col-md-6">
						<div class="form-group">
							<label for="startDate">Start Date</label>
							<div class="input-group date" id="fromDate">
								<input type='text' class="form-control" ng-model="startDate" />
								<span class="input-group-addon">
                    		<span class="glyphicon glyphicon-calendar"></span>
								</span>
							</div>
						</div>
					</div>
					<div class="col-md-6">
						<div class="form-group">
							<label for="endDate">End Date</label>
							<div class="input-group date" id="toDate">
								<input type='text' class="form-control" ng-model="endDate" />
								<span class="input-group-addon">
                    		<span class="glyphicon glyphicon-calendar"></span>
								</span>
							</div>
						</div>
					</div>
				</div>
				<div class="form-group">
					<label>Enter your message: </label>
					<textarea ng-model="textBroadcast" class="form-control" style="resize:none;" maxlength="160" rows="3" cols="4"></textarea>
					<button type="primary" class="btn btn-primary" ng-click="submitNotification()" style="margin-left: 40%;margin-top: 20px;width: 20%;">Submit</button>
					<br>
				</div>
				<div class="main">
					<table st-table="displayedCollection" class="table table-bordered">
						<thead>
							<tr>
								<th st-ratio="14" st-sort="circleId">Circles</th>
								<th st-ratio="14" st-sort="notificationTitle">Title</th>
								<th st-ratio="40" st-sort="notificationMessage">Message</th>
								<th st-ratio="14" st-sort="startDate">Start Date</th>
								<th st-ratio="14" st-sort="endDate">End Date</th>
								<th st-ratio="4">Delete</th>
							</tr>
						</thead>
						<tbody>
							<tr ng-repeat="notification in notificationList" class="excel-record">
								<td ng-show="admin">{{notificationCircles[$index]}}</td>
								<td ng-hide="admin">{{(circles[0][0] == notification.circleId || (notification.circleId).toString().indexOf(circles[0][0]) >= 0)? circles[0][1] : notification.circleId}}</td>
								<td>{{notification.notificationTitle}}</td>
								<td>{{notification.notificationMessage}}</td>
								<td>{{notification.startDate}}</td>
								<td>{{notification.endDate}}</td>
								<td><button type="button" class="btn btn-danger" ng-click="deleteNotification(notification.messageId)"><span class="glyphicon glyphicon-trash"></span> Delete</button></td>
							</tr>
						</tbody>
					</table>
				</div>
			</div>

		</div>
	</div>
	<!-- /container -->
</div>